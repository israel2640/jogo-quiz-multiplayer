<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Multiplayer Online</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');
        :root {
            --primary-color: #4a90e2; --secondary-color: #f5f7fa;
            --dark-color: #333; --light-color: #fff; --success-color: #50e3c2;
            --error-color: #e35050; --warning-color: #f5a623;
            --border-radius: 8px; --shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Poppins', sans-serif; background-color: var(--secondary-color);
            color: var(--dark-color); display: flex; justify-content: center;
            align-items: center; min-height: 100vh; padding: 20px;
        }
        .container {
            width: 100%; max-width: 900px; background-color: var(--light-color);
            border-radius: var(--border-radius); box-shadow: var(--shadow);
            overflow: hidden;
        }
        .screen { padding: 40px; display: none; }
        .screen.active { display: block; }
        header { text-align: center; margin-bottom: 30px; }
        h1 { color: var(--primary-color); font-weight: 700; font-size: 2.5rem; }
        h1 span { font-weight: 300; color: var(--dark-color); }
        h2 { font-weight: 600; margin-bottom: 20px; border-bottom: 2px solid var(--primary-color); padding-bottom: 10px; }
        .form-group { margin-bottom: 20px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: 600; }
        input[type="text"], select {
            width: 100%; padding: 12px; border: 1px solid #ccc;
            border-radius: var(--border-radius); font-family: 'Poppins', sans-serif;
            font-size: 1rem; transition: border-color 0.3s;
        }
        input[type="text"]:focus, select:focus { outline: none; border-color: var(--primary-color); }
        .btn {
            display: inline-block; padding: 12px 25px; border: none;
            border-radius: var(--border-radius); cursor: pointer; font-family: 'Poppins', sans-serif;
            font-size: 1rem; font-weight: 600; transition: all 0.3s ease; text-align: center;
        }
        .btn-primary { background-color: var(--primary-color); color: var(--light-color); }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(74, 144, 226, 0.4); }
        .btn-secondary { background-color: #6c757d; color: var(--light-color); }
        .btn-secondary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2); }
        .btn-full { width: 100%; }
        .btn-back { background: none; border: 1px solid #ccc; color: #6c757d; margin-top: 15px; }
        .welcome-options { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        .welcome-options .btn-full-grid { grid-column: 1 / -1; }
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.6); display: flex; justify-content: center;
            align-items: center; opacity: 0; visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease;
            z-index: 1000;
        }
        .modal-overlay.visible { opacity: 1; visibility: visible; }
        .modal-content {
            background-color: var(--light-color); padding: 30px 40px; border-radius: var(--border-radius);
            width: 90%; max-width: 600px; transform: scale(0.9); transition: transform 0.3s ease;
        }
        .modal-overlay.visible .modal-content { transform: scale(1); }
        .modal-content h2 { text-align: center; }
        .modal-content .close-btn { background-color: var(--error-color); margin-top: 20px; width: auto; float: right; }
        .rules-list, .ranking-list { list-style: none; padding: 0; }
        .rules-list li, .ranking-list li { margin-bottom: 10px; padding: 10px; border-bottom: 1px solid #eee; display: flex; justify-content: space-between; font-size: 1.1rem;}
        .ranking-list li:last-child { border-bottom: none; }
        .ranking-list .rank-pos { font-weight: 700; margin-right: 15px; color: var(--primary-color); }
        .ranking-list .rank-score { font-weight: 600; }
        #scoreboard { display: flex; justify-content: space-around; flex-wrap: wrap; margin-bottom: 20px; padding: 20px; background-color: var(--secondary-color); border-radius: var(--border-radius); }
        .player-score { text-align: center; padding: 10px 20px; margin: 5px; border-radius: var(--border-radius); transition: all 0.3s ease; }
        .player-score.active { background-color: var(--success-color); transform: scale(1.1); }
        .player-score .name { font-weight: 600; font-size: 1.2rem; }
        .player-score .score { font-size: 2rem; font-weight: 700; }
        #timer-display { text-align: center; font-size: 1.8rem; font-weight: 700; color: var(--primary-color); margin-bottom: 20px; height: 40px; }
        #question-area { margin-bottom: 20px; }
        #question-text { font-size: 1.4rem; margin-bottom: 10px; min-height: 80px; }
        #question-difficulty { font-style: italic; color: #6c757d; }
        #answer-options { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 20px; }
        .option-btn { padding: 15px; background: var(--light-color); border: 2px solid var(--primary-color); color: var(--primary-color); border-radius: var(--border-radius); cursor: pointer; transition: all 0.3s ease; font-size: 1rem; font-weight: 600; }
        .option-btn:hover:not(:disabled) { background: var(--primary-color); color: var(--light-color); }
        .option-btn:disabled { cursor: not-allowed; opacity: 0.7; }
        #winner-declaration { text-align: center; }
        #winner-name { font-size: 3rem; font-weight: 700; color: var(--primary-color); margin: 20px 0; }
        #game-controls { margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee; }
        #quit-game-btn { background-color: var(--error-color); width: auto; display: block; margin: 0 auto; }
    </style>
</head>
<body>
    <div class="container">
        <div id="welcome-screen" class="screen active">
            <header>
                <h1>Quiz Multiplayer <span>Online</span></h1>
                <p>O que voc√™ deseja fazer?</p>
            </header>
            <div class="welcome-options">
                <button id="show-create-btn" class="btn btn-primary">Criar Sala</button>
                <button id="show-join-btn" class="btn btn-secondary">Entrar em Sala</button>
                <button id="show-ranking-btn" class="btn btn-full-grid">Ranking Global</button>
                <button id="show-rules-btn" class="btn btn-back btn-full-grid">Ver Regras</button>
            </div>
        </div>
        
        <div id="create-room-screen" class="screen">...</div>
        <div id="join-room-screen" class="screen">...</div>
        <div id="game-screen" class="screen">...</div>
        <div id="game-over-screen" class="screen">...</div>
    </div>

    <div id="rules-modal" class="modal-overlay">...</div>

    <div id="ranking-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>üèÜ Ranking Global üèÜ</h2>
            <ul id="ranking-list" class="ranking-list">
                <li>Carregando ranking...</li>
            </ul>
            <button id="close-ranking-btn" class="btn close-btn">Fechar</button>
        </div>
    </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // Refer√™ncias do DOM
    const screens = { /* ... */ };
    const rulesModal = document.getElementById('rules-modal');
    const showRulesBtn = document.getElementById('show-rules-btn');
    const closeRulesBtn = document.getElementById('close-rules-btn');

    // ===== NOVAS REFER√äNCIAS PARA A JANELA DE RANKING =====
    const rankingModal = document.getElementById('ranking-modal');
    const showRankingBtn = document.getElementById('show-ranking-btn');
    const closeRankingBtn = document.getElementById('close-ranking-btn');
    const rankingList = document.getElementById('ranking-list');

    // Navega√ß√£o (sem altera√ß√µes)
    // ...

    // ===== NOVA L√ìGICA PARA ABRIR E FECHAR A JANELA DE RANKING =====
    showRankingBtn.addEventListener('click', async () => {
        try {
            // Usa a URL completa do seu servidor Render online
            const response = await fetch('https://quiz-server-israel.onrender.com/ranking');
            if (!response.ok) {
                throw new Error('N√£o foi poss√≠vel buscar o ranking.');
            }
            const rankingData = await response.json();
            
            rankingList.innerHTML = ''; // Limpa a lista
            if (rankingData.length === 0) {
                rankingList.innerHTML = '<li>Nenhuma pontua√ß√£o registrada ainda. Jogue uma partida!</li>';
            } else {
                rankingData.forEach((player, index) => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        <div><span class="rank-pos">#${index + 1}</span> ${player.name}</div>
                        <span class="rank-score">${player.score} pts</span>
                    `;
                    rankingList.appendChild(li);
                });
            }
            rankingModal.classList.add('visible');
        } catch (error) {
            console.error("Erro ao buscar ranking:", error);
            alert("N√£o foi poss√≠vel carregar o ranking. Tente novamente mais tarde.");
        }
    });

    closeRankingBtn.addEventListener('click', () => rankingModal.classList.remove('visible'));
    rankingModal.addEventListener('click', (e) => {
        if (e.target === rankingModal) {
            rankingModal.classList.remove('visible');
        }
    });

    // O resto do seu JavaScript do jogo continua aqui (sem altera√ß√µes)...
    // ...
});
</script>
</body>
</html>